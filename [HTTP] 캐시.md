# 웹 캐시가 주는 혜택
  * 불필요한 데이터 전송을 줄여 네트워크 비용을 줄인다.
  * 네트워크 병목을 줄여준다. 
  * 원 서버에 대한 요청을 줄여주기 때문에 서버에 대한 부하를 줄일 수 있다.
  * 거리로 인한 지연을 줄여준다.
</br>  
  
# 불필요한 데이터 전송
  * 복수의 클라이언트가 자주 쓰이는 원 서버 페이지에 접근할 때, 서버는 같은 문서를 클라이언트에게 각각 한 번씩 전송하게 된다.
  * **이러한 불필요한 데이터 전송은**
    * 네트워크 대역폭을 잡아먹고
    * 전송을 느리게 만들고
    * 웹 서버에 부하를 준다.
  * 캐시를 이용하면, 첫 번째 서버 응답은 캐시에 보관된다.
  * 캐시 된 사본이 뒤이은 요청들에 대한 응답으로 사용될 수 있기 때문에, 원 서버가 중복해서 트래픽을 주고받는 낭비가 줄어들게 된다.
</br>

# 대역폭 병목
  * 캐시는 네트워크 병목을 줄여준다.
  * 많은 네트워크가 원격 서버보다 로컬 네트워크 클라이언트에 더 넓은 대역폭을 제공한다.
  * 클라이언트들이 서버에 접근할 때의 속도는, 그 경로에 있는 가장 느린 네트워크의 속도와 같다. 
  * 만약 클라이언트가 빠른 LAN에 있는 캐시로부터 사본을 가져온다면, 캐싱은 성능을 대폭 개선할 수 있을 것이다.
</br>

# 거리로 인한 지연
  * 대역폭이 문제가 되지 않더라도, 거리가 문제가 될 수 있다.
  * 모든 네트워크 라우터는 제각각 인터넷 트래픽을 지연시킨다.
  * 빛의 속도(30만 킬로미터/초)로 인한 지연이 발생할 수 있다.
    * 병렬 커넥션이라 할지라도 왕복으로 주고받는 횟수에 따라 지연이 커질 것이다.
  * 기계실 근처에 캐시를 설치해서 문서가 전송되는 거리를 수천 킬로미터에서 수십 미터로 줄일 수 있다.
</br>

# 적중(Cache hit)과 부적중(Cache miss)
  * 캐시가 세상 모든 문서의 사본을 저장하지는 않는다.
  * 캐시에 요청이 도착했을 때, 대응하는 사본이 있다면 Cache hit, 대응하는 사본이 없다면 Cache miss
  * Cache miss 발생 시 원 서버로 요청이 전달된다.
  * **재검사(Revalidation)**
    * 원 서버 콘텐츠가 변경될 수 있기 때문에, 캐시는 갖고 있는 사본이 최신인지 서버를 통해 점검해야 한다.
    * 캐시는 스스로 원한다면 언제든지 사본을 재검사할 수 있다.
      * 하지만 캐시가 문서를 수백만 개씩 갖고 있는 경우가 흔한데 비해 네트워크 대역폭은 부족하다.
      * 그러므로 대부분의 캐시는 그 사본이 검사를 할 필요가 있을 정도로 충분히 오래된 경우에만 재검사를 한다.
    * 재검사를 위해 원 서버에게 보내는 ```GET``` 요청에 ```If-Modified-Since``` 헤더를 추가
    * ```GET If-Modified-Since``` 요청은 캐시 된 시간 이후에 변경된 경우에만 사본을 보내달라는 의미
    </br>  
    
    * 재검사 적중 (느린 적중)  
      * 캐시가 사본의 재검사가 필요할 때, 원 서버에 작은 재검사 요청을 보낸다.
      * 콘텐츠가 변경되지 않았다면, 서버는 ```304 Not Modified``` 응답을 전달
      * 사본이 아직 유효함을 알게 된 캐시는 해당 사본을 클라이언트에게 제공한다. 
      * 순수 캐시 적중보다 느린데, 원 서버와 검사를 할 필요가 있기 때문이다.
      * 하지만 캐시 부적중보다는 빠르다. 서버로부터 객체 데이터를 받아올 필요가 없기 때문에
    </br>
    
    * 재검사 부적중
      * 만약 서버 객체가 캐시 된 사본과 다르다면, 서버는 콘텐츠 전체와 함께 평범한 ```HTTP 200 OK``` 응답을 클라이언트에게 보낸다.
    </br>
    
    * 객체 삭제
      * 만약 서버 객체가 삭제되었다면, 서버는 ```404 Not Found``` 응답을 돌려보내며, 캐시는 사본을 삭제한다.
    </br>
    
  * **적중률**
    * 캐시가 요청을 처리하는 비율
    * 적중률은 예측하기 어렵지만 오늘날 적중률 40% 면 웹 캐시로 괜찮은 편이다.
  </br>
  
  * **바이트 적중률**
    * 캐시를 통해 제공된 모든 바이트의 비율
    * 트래픽이 절감된 정도를 포착해낸다.
    * 문서 적중률을 개선하면 전체 대기시간(지연)이 줄어들고
    * 바이트 적중률의 개선은 대역폭 절약을 최적화한다.
  </br>
  
  * **적중과 부적중의 구별**
    * HTTP는 클라이언트에게 응답이 캐시 적중인지 원 서버 접근인지 말해줄 수 있는 방법을 제공하지 않는다.
    * 클라이언트가 응답이 캐시에서 왔는지 알아내는 방법
      * 응답의 ```Date``` 헤더 값을 현재 시각과 비교하여, 응답의 생성일이 더 오래되었다면 응답이 캐시 된 것
      * 응답이 얼마나 오래되었는지 말해주는 ```Age``` 헤더를 이용
</br>

# 캐시 토폴로지
